(this["webpackJsonpmy-test"]=this["webpackJsonpmy-test"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(123),r=a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"cf030fe2-6f9a-49e8-86a7-893fb44b9868"}}),o={getUsers:function(e,t){return r.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return r.post("follow/".concat(e)).then((function(e){return e.data}))},profileInfo:function(e){return r.get("profile/".concat(e)).then((function(e){return e.data}))},setProfileMe:function(){return r.get("auth/me").then((function(e){return e.data}))},getProfileStatus:function(e){return r.get("profile/status/".concat(e)).then((function(e){return e}))},setStatus:function(e){return r.put("profile/status",{status:e}).then((function(e){return e}))},login:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},logOut:function(){return r.delete("auth/login").then((function(e){return e}))},getCaptchaUrl:function(){return r.get("/security/get-captcha-url").then((function(e){return e}))}}},119:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return O}));var a=n(8),r=n.n(a),o=n(15),c=n(40),i=n(4),s=n(11),l=n(14),u="social-network/users/FOLLOW_USER",f="social-network/users/GET_USER",p="social-network/users/TOTAL_COUNT",m="social-network/users/SET_CURRENT_PAGE",d="social-network/users/SET_TOGGLE_FOLLOWING",g={users:[],totalUsers:null,currentPage:1,pageSize:3,toggleFollowing:[]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?(e.followed?e.followed=!1:e.followed=!0,Object(i.a)({},e)):e}))});case f:return Object(i.a)(Object(i.a)({},e),{},{users:t.newUsers});case m:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.current});case p:return Object(i.a)(Object(i.a)({},e),{},{totalUsers:t.value});case d:return Object(i.a)(Object(i.a)({},e),{},{toggleFollowing:t.boolFollowing?[].concat(Object(c.a)(e.toggleFollowing),[t.followID]):e.toggleFollowing.filter((function(e){return e!==t.followID}))});default:return e}},_=function(e){return{type:u,id:e}},E=function(e){return{type:f,newUsers:e}},h=function(e){return{type:p,value:e}},v=function(e){return{type:m,current:e}},P=function(e,t){return{type:d,followID:e,boolFollowing:t}},O={setUsersTC:function(e,t,n){return function(){var a=Object(o.a)(r.a.mark((function a(o){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==e){a.next=8;break}return o(l.a.setLoaderAC(!0)),a.next=4,s.a.getUsers(t,n);case 4:c=a.sent,o(l.a.setLoaderAC(!1)),o(h(c.totalCount)),o(E(c.items));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},newPageTC:function(e,t,n){return function(){var a=Object(o.a)(r.a.mark((function a(o){var c,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=e?n===t()?n:n+1:1===n?n:n-1,o(v(c)),o(l.a.setLoaderAC(!0)),a.next=5,s.a.getUsers(g.pageSize,c);case 5:i=a.sent,o(l.a.setLoaderAC(!1)),o(E(i.items));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},followTC:function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(P(e,!0)),t.next=3,s.a.follow(e);case 3:0===t.sent.resultCode&&(n(_(e)),n(P(e,!1)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollowTC:function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(P(e,!0)),t.next=3,s.a.unfollow(e);case 3:0===t.sent.resultCode&&(n(_(e)),n(P(e,!1)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},14:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return E}));var a=n(8),r=n.n(a),o=n(15),c=n(4),i=n(11),s=n(24),l="social-network/different/LOADER",u="social-network/different/SET_MY_DATE",f="social-network/different/DELETE_MY_DATE",p="social-network/different/INITIALIZE",m="social-network/different/CAPTCHA",d="social-network/different/DELETE_CAPTCHA",g={imgAva:"https://i.pinimg.com/originals/0c/a9/e2/0ca9e28dcb12dc698cfd2beda6d6fa64.jpg",preloader:!0,myDate:null,login:!1,myID:null,loading:!1,inizialization:!1,getCaptchaUrl:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(c.a)(Object(c.a)({},e),{},{preloader:t.newBool});case u:return Object(c.a)(Object(c.a)({},e),{},{myDate:t.date.data,login:!t.date.resultCode,myID:t.date.data.id,loading:!0});case f:return Object(c.a)(Object(c.a)({},e),{},{myDate:null,login:!1,myID:null});case p:return Object(c.a)(Object(c.a)({},e),{},{inizialization:!0});case m:return Object(c.a)(Object(c.a)({},e),{},{getCaptchaUrl:t.url});case d:return Object(c.a)(Object(c.a)({},e),{},{getCaptchaUrl:null});default:return e}},_={setLoaderAC:function(e){return{type:l,newBool:e}},setDateAC:function(e){return{type:u,date:e}},deleteDateAC:function(){return{type:f}},inizializationAC:function(){return{type:p}},capthaUrlAC:function(e){return{type:m,url:e}},deleteCaptchaUrl:function(){return{type:d}}},E={setProfileInfoMeTC:function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.setProfileMe().then((function(e){t(_.setDateAC(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setLoginTC:function(e,t,n,a){return function(){var c=Object(o.a)(r.a.mark((function o(c){var l;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.login(e,t,n,a);case 2:0===(l=r.sent).resultCode?i.a.setProfileMe().then((function(e){c(_.setDateAC(e)),c(_.deleteCaptchaUrl())})):(10===l.resultCode&&c(E.getCaptchaUrl()),c(Object(s.a)("login",{_error:l.messages[0]})));case 4:case"end":return r.stop()}}),o)})));return function(e){return c.apply(this,arguments)}}()},logOutTC:function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.logOut();case 2:t(_.deleteDateAC());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},inizializationTC:function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(E.setProfileInfoMeTC());case 2:t(_.inizializationAC());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getCaptchaUrl:function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getCaptchaUrl();case 2:n=e.sent,a=n.data.url,t(_.capthaUrlAC(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}},152:function(e,t,n){e.exports=n(282)},157:function(e,t,n){},158:function(e,t,n){},162:function(e,t,n){},25:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(85),c=n.n(o);t.a=function(e){return r.a.createElement("div",{className:c.a.box},r.a.createElement("div",{className:c.a.lds_spinner},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}},26:function(e,t,n){e.exports=n.p+"static/media/load_book.c2173abd.gif"},282:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),r=n.n(a),o=n(60),c=n.n(o),i=(n(157),n(4)),s=n(9),l=(n(158),n(12)),u=n(29),f=(n(162),function(e){var t=e.log;return r.a.createElement("nav",{className:".nav"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/profile",className:"menu__element"},t?"Profile":"Sign IN")),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/users",className:"menu__element"},"Users")))}),p=r.a.memo((function(e){return r.a.createElement(f,e)})),m=Object(l.b)((function(e){return{log:e.differentPage.login}}),{})(p),d=n(14),g=n(25),b=n(26),_=n.n(b),E=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(g.a,{loading:_.a})},r.a.createElement(e,t))}},h=n(8),v=n.n(h),P=n(15),O=n(40),w=n(24),j=n(11),C="social-network/profile/ADD_POST",x="social-network/profile/SET_PROFILE",k="social-network/profile/GET_STATUS",T={profile:null,boolDate:!1,post:[{message:"New post!",like:2,id:0},{message:"I'm learn Java!",like:5,id:1},{message:"I'm learn Python!",like:33,id:2},{message:"I want programmes!",like:15,id:3}]},y={addPostAC:function(e){return{type:C,text:e}},setProfileInfoAC:function(e){return{type:x,date:e}},getProfileStatusAC:function(e){return{type:k,date:e}}},A={getProfileInfoTC:function(e,t){return function(){var n=Object(P.a)(v.a.mark((function n(a){var r,o,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e||t){n.next=11;break}return n.next=3,j.a.setProfileMe();case 3:return r=n.sent,a(y.actionCreatorDifferent.setDateAC(r)),n.next=7,j.a.profileInfo(r.data.id);case 7:o=n.sent,a(y.setProfileInfoAC(o)),n.next=15;break;case 11:return n.next=13,j.a.profileInfo(e||t);case 13:c=n.sent,a(y.setProfileInfoAC(c));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getStatusTC:function(e,t){return function(){var n=Object(P.a)(v.a.mark((function n(a){var r,o,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e||t){n.next=11;break}return n.next=3,j.a.setProfileMe();case 3:return r=n.sent,a(d.a.setDateAC(r)),n.next=7,j.a.getProfileStatus(r.data.id);case 7:o=n.sent,a(y.getProfileStatusAC(o.data)),n.next=15;break;case 11:return n.next=13,j.a.getProfileStatus(e||t);case 13:(c=n.sent).data?a(y.getProfileStatusAC(c.data)):a(y.getProfileStatusAC("No status!"));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setStatusTC:function(e){return function(){var t=Object(P.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,j.a.setStatus(e);case 3:0===t.sent.data.resultCode&&n(y.getProfileStatusAC(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addTextPostTC:function(e){return function(t){t(e?y.addPostAC(e):Object(w.a)("post",{_error:"Unable to create empty post"}))}},deleteErrorChangeTC:function(){return function(e){e(Object(w.a)("post",{_error:null}))}}},S=n(61),D=n(10),N=n(120),I=n(121),M=n(51),U=n.n(M),L=function(e){return r.a.createElement("div",{className:U.a.post},r.a.createElement("div",{className:U.a.post__ava},r.a.createElement("img",{src:e.onProfile.photos.large?e.onProfile.photos.large:"https://cdn.iconscout.com/icon/free/png-512/laptop-user-1-1179329.png",alt:""})),r.a.createElement("div",{className:U.a.post__info},r.a.createElement("p",null,e.text),r.a.createElement("div",{className:U.a.post__like},e.like)))},z=n(41),F=n.n(z),B=Object(I.a)({form:"post"})((function(e){var t=e.posts.map((function(t){return r.a.createElement(L,{onProfile:e.onProfile,text:t.message,key:t.id,like:t.like})}));return r.a.createElement(r.a.Fragment,null,e.error?r.a.createElement("div",{className:F.a.posts__error},e.error):"",r.a.createElement("form",{onSubmit:e.handleSubmit,className:F.a.posts__form},r.a.createElement("div",{className:F.a.posts__input},r.a.createElement(N.a,{className:F.a.posts__textarea,value:e.newPostTexts,placeholder:"New post!",component:"textarea",name:"textPost",onChange:e.deleteErrorChangeTC})),r.a.createElement("button",{className:"button"},"Add post")),r.a.createElement("div",{className:F.a.scrool},t))})),R=r.a.memo((function(e){return r.a.createElement(B,Object.assign({onSubmit:function(t){e.addTextPostTC(t.textPost)}},e))})),G=Object(l.b)((function(e){return{newPostTexts:e.profilePage.newPostText,posts:e.profilePage.post,imgAva:e.differentPage.imgAva,onProfile:e.profilePage.profile}}),Object(i.a)({},A))(R),J=n(66),W=n.n(J),H=n(88),Y=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(H.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(e.status),s=Object(H.a)(i,2),l=s[0],u=s[1];Object(a.useEffect)((function(){u(e.status)}),[e.status]);return r.a.createElement("div",null,o?r.a.createElement("div",null,r.a.createElement("input",{onChange:function(e){e.currentTarget.value!==l&&u(e.currentTarget.value)},value:l,onBlur:function(){c(!1),l!==e.status&&e.onSetStatusTC(l)},autoFocus:!0})):r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:function(){c(!0)}},e.status)))})),q=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:e.logOutTC,className:"button"},"log out"),r.a.createElement("div",{className:W.a.profile__flex_blog},r.a.createElement("div",{className:W.a.profile__ava},r.a.createElement("img",{src:e.onProfile.photos.large?e.onProfile.photos.large:"https://cdn.iconscout.com/icon/free/png-512/laptop-user-1-1179329.png",alt:"#"})),r.a.createElement("div",{className:W.a.profile__info},r.a.createElement("h2",null,e.onProfile.fullName),r.a.createElement("p",null,e.onProfile.aboutMe?e.onProfile.aboutMe:"Nol"),r.a.createElement("p",null,!0===e.onProfile.lookingForAJob?"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443":"\u041d\u0435 \u0438\u0449\u0443"),r.a.createElement(Y,{status:e.status,onSetStatusTC:e.setStatusTC}))))})),K=r.a.memo((function(e){return Object(a.useEffect)((function(){e.getProfileInfoTC(e.match.params.id,e.onMyID),e.getStatusTC(e.match.params.id,e.onMyID)}),[e,e.status,e.boolProfile]),e.boolProfile&&e.status?r.a.createElement(q,e):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{loading:_.a}))})),Z=Object(D.compose)(Object(l.b)((function(e){return{status:e.profilePage.status,onProfile:e.profilePage.profile,boolProfile:e.profilePage.boolDate,onMyID:e.differentPage.myID,log:e.differentPage.login,auth:e.differentPage.login}}),Object(i.a)(Object(i.a)({},A),d.c)),s.g,S.a)(K),$=n(67),Q=n.n($),V=r.a.memo((function(e){return e.boolProfile&&e.status?r.a.createElement("div",{className:Q.a.profile},r.a.createElement("div",{className:Q.a.profile__info},r.a.createElement(Z,null)),r.a.createElement("div",{className:Q.a.profile__posts},r.a.createElement(G,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{loading:_.a}))})),X=r.a.memo((function(e){return Object(a.useEffect)((function(){e.getProfileInfoTC(e.match.params.id,e.onMyID),e.getStatusTC(e.match.params.id,e.onMyID)}),[e,e.status,e.boolProfile]),e.boolProfile&&e.status?r.a.createElement(V,e):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{loading:_.a}))})),ee=Object(D.compose)(Object(l.b)((function(e){return{status:e.profilePage.status,onProfile:e.profilePage.profile,boolProfile:e.profilePage.boolDate,onMyID:e.differentPage.myID,log:e.differentPage.login,auth:e.differentPage.login}}),Object(i.a)(Object(i.a)({},A),d.c)),s.g,S.a)(X),te=r.a.lazy((function(){return n.e(3).then(n.bind(null,288))})),ne=r.a.lazy((function(){return n.e(4).then(n.bind(null,289))})),ae=r.a.memo((function(e){return Object(a.useEffect)((function(){e.inizializationTC()}),[]),e.inizialize?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"header"}),r.a.createElement("main",{className:"page"},r.a.createElement("div",{className:"page__menu"},r.a.createElement(m,null)),r.a.createElement("div",{className:"page__content"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/profile/:id?",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(s.b,{path:"/users",render:function(){return E(ne)()}}),r.a.createElement(s.b,{path:"/login",render:function(){return E(te)()}}),r.a.createElement(s.a,{from:"/",to:"/profile"}))))):r.a.createElement(g.a,{loading:_.a})})),re=Object(s.g)(Object(l.b)((function(e){return{inizialize:e.differentPage.inizialization}}),Object(i.a)({},d.c))(ae)),oe="social-network/dialogs/ADD_MESSAGES",ce={userNameMessage:[{name:"Jonson",id:"0"},{name:"Li",id:"1"},{name:"Max",id:"2"},{name:"Linda",id:"3"},{name:"Ron",id:"4"}],messageText:[{textMessage:"New messages",id:0},{textMessage:"Message",id:1},{textMessage:"ns",id:2}]},ie=n(119),se=n(125),le=n(122),ue=n(126),fe=Object(D.combineReducers)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(i.a)(Object(i.a)({},e),{},{post:[].concat(Object(O.a)(e.post),[{message:t.text,like:0,id:Object(i.a)({},e.post[e.post.length-1].id+1)}]),newPostText:""});case x:return Object(i.a)(Object(i.a)({},e),{},{profile:t.date,boolDate:!0});case k:return Object(i.a)(Object(i.a)({},e),{},{status:t.date});default:return e}},messagesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(i.a)(Object(i.a)({},e),{},{messageText:[].concat(Object(O.a)(e.messageText),[{textMessage:t.text,id:Object(i.a)({},e.messageText[e.messageText.length-1].id+1)}])});default:return e}},differentPage:d.b,usersPage:ie.b,form:le.a}),pe=Object(D.createStore)(fe,Object(ue.composeWithDevTools)(Object(D.applyMiddleware)(se.a)));window.str=pe;var me=pe;c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,null,r.a.createElement(l.a,{store:me},r.a.createElement(re,{state:me.getState(),dispatch:me.dispatch.bind(me)})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,n){e.exports={posts__form:"PostsBlock_posts__form__1_rqK",posts__textarea:"PostsBlock_posts__textarea__1jH-L",posts__error:"PostsBlock_posts__error__2LtTg"}},51:function(e,t,n){e.exports={post:"Post_post__3l1_E",post__ava:"Post_post__ava__1LAfO",post__info:"Post_post__info__dqO2e",post__like:"Post_post__like__30jaf"}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),o=n(9),c=function(e){return function(t){return t.auth?r.a.createElement(e,t):r.a.createElement(o.a,{to:"/login"})}}},66:function(e,t,n){e.exports={profile__flex_blog:"ProfileBlock_profile__flex_blog__13y1P",profile__ava:"ProfileBlock_profile__ava__1mbrs",profile__info:"ProfileBlock_profile__info__3L2An"}},67:function(e,t,n){e.exports={profile__info:"Profile_profile__info__1k1DT",profile__posts:"Profile_profile__posts__2udME"}},85:function(e,t,n){e.exports={lds_spinner:"preloader_lds_spinner__Z91i-"}}},[[152,1,2]]]);
//# sourceMappingURL=main.67cba75a.chunk.js.map